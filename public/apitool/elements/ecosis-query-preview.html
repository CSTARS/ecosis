<dom-module id="ecosis-query-preview">
  <style>
    :host {
      display: block;
    }
    #response {
      max-height: 600px;
      overflow: auto;
    }
  </style>
  <template>
    <div id="response"></div>
  </template>
</dom-module>

<script>
  Polymer({
    is : 'ecosis-query-preview',

    update : function(url) {
      this.$.response.innerHTML = '<i class="fa fa-spinner fa-spin"></i> Loading...';

      $.get(url, function(resp){
        var html = JSON.stringify(resp, '  ', '  ')
                        .replace(/ /g, '&nbsp;')
                        .replace(/\n/g, '<br />');

        this.$.response.innerHTML = '<div>'+html+'</div>';
      }.bind(this));
    }
  })
</script>
