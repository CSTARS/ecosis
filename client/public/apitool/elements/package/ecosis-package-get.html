<dom-module id="ecosis-package-get">
  <style>
    :host {
      display: block;
    }
  </style>

  <template>
    <h4 class="page-header">/package/get</h4>
    <div class="help-block">
      You must provide either the package_id or the package_name.
    </div>

    <h5>Parameters</h5>

    <div class="form-horizontal">

      <div class="form-group">
        <label for="filtersInput" class="col-lg-2 control-label">package_id</label>
        <div class="col-lg-10">
          <input id="idInput" type="text" class="form-control" on-input="onInputId"/>
          <div class="help-block">EcoSIS package id</div>
        </div>
      </div>

      <div class="form-group">
        <label for="filtersInput" class="col-lg-2 control-label">package_name</label>
        <div class="col-lg-10">
          <input id="nameInput" type="text" class="form-control" on-input="onInputName"/>
          <div class="help-block">EcoSIS package name</div>
        </div>
      </div>

    </div>

    <h5>Preview</h5>
    <div id="preview"></div>

    <ecosis-query-preview id="queryPreview"></ecosis-query-preview>

  </template>
</dom-module>

<script>
  Polymer({
    is : 'ecosis-package-get',

    onInputId : function(e) {
      this.$.nameInput.value = '';
      var id = e.currentTarget.value;
      var url = HOST+'/package/get?id='+id;

      this.$.preview.innerHTML = '<a href="'+url+'" target="_blank">'+url+'</a>';
      this.$.queryPreview.update(url);
    },

    onInputName : function(e) {
      this.$.idInput.value = '';
      var id = e.currentTarget.value;
      var url = HOST+'/package/get?package_name='+id;

      this.$.preview.innerHTML = '<a href="'+url+'" target="_blank">'+url+'</a>';
      this.$.queryPreview.update(url);
    }
  });
</script>
